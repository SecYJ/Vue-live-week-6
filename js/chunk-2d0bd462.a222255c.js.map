{"version":3,"sources":["webpack:///./src/views/backstage/Admin.vue","webpack:///./src/views/backstage/Admin.vue?0b7c"],"names":["id","to","href","signOut","mounted","this","verifyUser","methods","token","$router","push","url","fetch","method","headers","Authorization","res","json","data","success","Error","alert","message","document","cookie","render"],"mappings":"4IAkCMA,GAAG,O,+BACa,Q,+BAAkB,O,+BACJ,U,+BAAoB,O,+BACvB,Q,+BAAkB,O,uMAHlD,yBAKM,MALN,EAKM,CAJL,yBAAsC,GAAzBC,GAAG,KAAG,C,8BAAC,iBAAI,C,cACxB,yBAAsD,GAAzCA,GAAG,mBAAiB,C,8BAAC,iBAAM,C,cACxC,yBAAiD,GAApCA,GAAG,gBAAc,C,8BAAC,iBAAI,C,cACnC,yBAA2C,KAAxCC,KAAK,IAAK,QAAK,0DAAU,EAAAC,SAAA,EAAAA,QAAA,qBAAO,eAAE,QAEtC,yBAA2B,I,sDArCb,GACdC,QADc,WAEbC,KAAKC,cAENC,QAAS,CACFD,WADE,WACW,qKACbE,EAAA,KADa,yCACC,EAAKC,QAAQC,KAAK,WADnB,cAEZC,EAFY,UAEH,uCAFG,qCAKCC,MAAMD,EAAK,CAC5BE,OAAQ,OACRC,QAAS,CAAEC,cAAeP,EAAA,QAPV,cAKXQ,EALW,gBASEA,EAAIC,OATN,UASXC,EATW,OAUZA,EAAKC,QAVO,uBAUQ,IAAIC,MAAM,SAVlB,6DAYjBC,MAAM,KAAIC,SACV,EAAKb,QAAQC,KAAK,UAbD,6DAgBnBP,QAjBQ,WAkBPoB,SAASC,OAAT,mBACAH,MAAM,aACNhB,KAAKI,QAAQC,KAAK,aCxBrB,EAAOe,OAASA,EAED","file":"js/chunk-2d0bd462.a222255c.js","sourcesContent":["<script>\r\nimport { token } from \"@/views/backstage/token.js\";\r\n\r\nexport default {\r\n\tmounted() {\r\n\t\tthis.verifyUser();\r\n\t},\r\n\tmethods: {\r\n\t\tasync verifyUser() {\r\n\t\t\tif (!token) return this.$router.push(\"/login\");\r\n\t\t\tconst url = `${process.env.VUE_APP_APIURL}/api/user/check`;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await fetch(url, {\r\n\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\theaders: { Authorization: token },\r\n\t\t\t\t});\r\n\t\t\t\tconst data = await res.json();\r\n\t\t\t\tif (!data.success) throw new Error(\"你尚未登入\");\r\n\t\t\t} catch (err) {\r\n\t\t\t\talert(err.message);\r\n\t\t\t\tthis.$router.push(\"/login\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tsignOut() {\r\n\t\t\tdocument.cookie = `token=; expires=`;\r\n\t\t\talert(\"Token已清除!\");\r\n\t\t\tthis.$router.push(\"/login\");\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<template>\r\n\t<div id=\"nav\">\r\n\t\t<router-link to=\"/\">回到前台</router-link> |\r\n\t\t<router-link to=\"/admin/products\">後台產品列表</router-link> |\r\n\t\t<router-link to=\"/admin/order\">後台訂單</router-link> |\r\n\t\t<a href=\"#\" @click.prevent=\"signOut\">登出</a>\r\n\t</div>\r\n\t<router-view></router-view>\r\n</template>\r\n","import { render } from \"./Admin.vue?vue&type=template&id=20673835\"\nimport script from \"./Admin.vue?vue&type=script&lang=js\"\nexport * from \"./Admin.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}